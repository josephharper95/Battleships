function AIHard(t,e,r){AI.call(this,t,e,r);var n=this.getOpponentBoard(),o=n.getCoordinates(),a=o.length,h=new Board(a),s=h.getCoordinates(),g=new Array(a),f=new Ship("2",2),l=new Ship("3",3),d=new Ship("3",3),u=new Ship("4",4),c=new Ship("5",5),p=[f,l,d,u,c];this.resetProbability=function(){for(var t=0;t<g.length;t++){g[t]=new Array(g.length);for(var e=0;e<g[t].length;e++)g[t][e]=0}},this.resetProbability(),this.refreshProbability=function(){this.resetProbability();for(var t=this.isTargeting(),e=0;e<s.length;e++)for(var r=0;r<s[e].length;r++)for(var i=0;i<p.length;i++)this.updateProbabilityDensity(p[i],e,r,t),p[i].changeOrientation(),this.updateProbabilityDensity(p[i],e,r,t),p[i].changeOrientation(),(o[e][r].isHit()||o[e][r].isLand())&&(g[e][r]=0)},this.updateProbabilityDensity=function(t,e,r,i){var n=this.calcShipCoords(t,e,r,i);if(n)for(var o=this.hitCoords(n),a=0;a<n.length;a++)g[n[a].getX()][n[a].getY()]+=o>0?100*o:1},this.hitCoords=function(t){for(var e=0,r=0;r<t.length;r++){var i=t[r].getX(),n=t[r].getY();o[i][n].isHit()&&o[i][n].containsShip()&&!o[i][n].getShip().isDestroyed()&&e++}return e},this.fire=function(){for(var t=0,e=new Array,r=0;r<g.length;r++)for(var i=0;i<g[r].length;i++){if(g[r][i]>t){t=g[r][i];var e=new Array}g[r][i]==t&&e.push(s[r][i])}var o=Math.floor(Math.random()*e.length),a=e[o],f=n.fire(a.getX(),a.getY()),l=n.getCoordinateAt(a.getX(),a.getY());if(f){var d=l.getShip(),u=d.getSize(),r=p.length-1;if(d.isDestroyed())for(r=0;r<p.length;r++)if(p[r].getSize()==u){p.splice(r,1);break}for(var c=d.getCoordinates(),r=0;r<c.length;r++)g[c[r].getX()][c[r].getY()]=0}return h.fire(a.getX(),a.getY()),this.refreshProbability(),l},this.isTargeting=function(){for(var t=n.getShips(),e=0;e<t.length;e++){var r=t[e];if(r.getNumberOfHits()>0&&!r.isDestroyed())return!0}return!1},this.calcShipCoords=function(t,e,r,n){var o=new Array;for(i=0;i<t.getSize();i++){if(e>a-1||e<0||r>a-1||r<0)return!1;var h=s[e][r];if(o.push(h),!n&&h.isHit()||h.isLand())return!1;0==t.getOrientation()?r++:e++}return o},this.toString=function(){document.write("<table>");for(var t=0;t<g.length;t++){document.write("<tr>");for(var e=0;e<g[t].length;e++)document.write("<td>"+g[t][e]+"</td>");document.write("</tr>")}document.write("</table>")}}AIHard.prototype=Object.create(AI.prototype),AIHard.prototype.constructor=AIHard;