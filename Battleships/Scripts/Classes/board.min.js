function Board(t,e){var r=t,i=t,n=new Array,o=new Array(r);for(var a=[],s=0;s<r;s++){o[s]=new Array(i);for(var h=0;h<i;h++)o[s][h]=new Coordinate(s,h)}if(this.getShips=function(){return n},this.getCoordinates=function(){return o},this.getWidth=function(){return i},this.getHeight=function(){return r},this.getCoordinateAt=function(t,e){return o[t][e]},null!=e)for(var d=0;d<e.length;d++){var c=this.getCoordinateAt(e[d].x,e[d].y);c&&c.markAsLand()}this.getListOfCoordinates=function(){for(var t=new Array,e=0;e<r;e++)for(var n=0;n<i;n++)o[e][n].isLand()||t.push(o[e][n]);return t},this.getShipsPlaced=function(){return a},this.toString=function(){document.write("<table border='1' width='400' height='400' style='table-layout: fixed'>");for(var t=0;t<o.length;t++){document.write("<tr>");for(var e=0;e<o[t].length;e++){if(o[t][e].isHit()?document.write("<td bgcolor='#FF0000'>"):document.write("<td>"),o[t][e].containsShip()){var r=o[t][e].getShip().getName();document.write(r.substring(0,1))}else document.write(".");document.write("</td>")}document.write("</tr>")}document.write("</table>")}}Board.prototype.canPlaceShip=function(t,e,r){if("number"!=typeof e||"number"!=typeof r)return!1;if("object"!=typeof t)return!1;var n=t.getOrientation(),o=t.getSize(),a=new Array,s=!0;if(t.isPlaced())return{canPlace:!1,coordinates:new Array};for(i=0;i<o;i++){if(e>this.getWidth()-1||e<0||r>this.getHeight()-1||r<0)return{canPlace:!1,coordinates:a};var h=this.getCoordinateAt(e,r);a.push(h),(h.containsShip()||h.isLand())&&(s=!1),0==n?r++:e++}return{canPlace:s,coordinates:a}},Board.prototype.placeShip=function(t,e,r){var n=this.canPlaceShip(t,e,r),o=n.canPlace,a=n.coordinates;if(o){for(i=0;i<a.length;i++){var s=a[i];s.placeShip(t)}return t.place(a),this.getShips().push(t),this.getShipsPlaced().push(t),!0}return!1},Board.prototype.undoPlaceShip=function(){if(!this.getShipsPlaced().length>0)return!1;for(var t=this.getShipsPlaced().pop(),e=t.getCoordinates(),r=0;r<t.getSize();r++)e[r].removeShip();return t.reset(),{ship:t,coordinates:e,numShipsPlaced:this.getShipsPlaced().length}},Board.prototype.resetBoard=function(){for(;this.getShipsPlaced().length>0;)this.undoPlaceShip()},Board.prototype.moveShip=function(t,e,r){if(t.isPlaced()&&0==t.getNumberOfHits()){var i=t.getSize(),n=t.getOrientation(),o=e,a=r;for(d=0;d<i;d++){if(o>this.getWidth()-1||o<0||a>this.getHeight()-1||a<0)return!1;var s=this.getCoordinateAt(o,a);if(s.containsShip()||s.isHit()||s.isLand())return!1;0==n?a++:o++}for(var h=t.getCoordinates(),d=0;d<i;d++)h[d].removeShip();t.reset();var c=this.getShipsPlaced().indexOf(t);this.getShipsPlaced().splice(c,1),this.placeShip(t,e,r)}},Board.prototype.healShipCoord=function(t,e){var r=this.getCoordinateAt(t,e);return!(!r.containsShip()||!r.isHit())&&(r.healShip(),!0)},Board.prototype.canFire=function(t,e){if("number"!=typeof t||"number"!=typeof e)return!1;var r=this.getCoordinateAt(t,e);return!r.isLand()&&!r.isHit()},Board.prototype.fire=function(t,e){if(this.canFire){var r=this.getCoordinateAt(t,e),i=r.recordHit();return i}return!1},Board.prototype.getAdjacentLocations=function(t,e){if("number"!=typeof t||"number"!=typeof e)return!1;var r=new Array;return e-1>=0&&r.push(this.getCoordinateAt(t,e-1)),e+1<this.getHeight()&&r.push(this.getCoordinateAt(t,e+1)),t-1>=0&&r.push(this.getCoordinateAt(t-1,e)),t+1<this.getWidth()&&r.push(this.getCoordinateAt(t+1,e)),r},Board.prototype.getMovesAtAdjacentLocations=function(t,e){var r=this.getAdjacentLocations(t,e),i=new Array;for(o=0;o<r.length;o++)r[o].isHit()||r[o].isLand()||i.push(r[o]);var n,t,o;for(o=i.length;o;o--)n=Math.floor(Math.random()*o),t=i[o-1],i[o-1]=i[n],i[n]=t;return i},Board.prototype.getFloatingShips=function(){var t=new Array,e=this.getShipsPlaced();for(i=0;i<e.length;i++)e[i].isDestroyed()||t.push(e[i]);return t},Board.prototype.isViable=function(){for(var t=0,e=this.getShipsPlaced(),r=0;r<e.length;r++)e[r].isDestroyed()||(t+=1);return 0!=t};