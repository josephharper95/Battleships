function changePage(e){$(".subPage:visible").fadeOut(100,function(){$(".subPage[data-page="+e+"]").fadeIn(100)}),$(menu+" button").attr("data-selected","false"),$(menu+" button[data-page="+e+"]").attr("data-selected","true"),$(menu+" button").off("click"),$(menu+" button[data-selected=false]").on("click",function(){var e=$(this),t=e.data("page");changePage(t)}),dropdowns()}function dropdowns(){$("[data-page=all-scores] select").off("change").change(function(){allScoresDropDownChange()}),$("[data-page=all-games] select").off("change").change(function(){allGamesDropDownChange()}),$("[data-page=all-shots] select").off("change").change(function(){allShotsDropDownChange()})}function populateDifficultyDropdowns(){var e="";e+="<select>";for(var t=0;t<difficulties.length;t++)e+="<option",e+=" value='"+difficulties[t]+"'",e+=">",e+=capitaliseFirstChar(difficulties[t]),e+="</option>";e+="</select>",$(".difficultyOptions").html(e),$(".difficultyOptions").off("change"),$(".folderArea").on("change",".difficultyOptions",function(){var e=$(this),t="#"+$(e).attr("data-grid"),i=$(e).val();$(t+" table:not(."+i+")").fadeOut(200).promise().done(function(){$(t+" table."+i).fadeIn(200)})})}function allScoresDropDownChange(){var e=$("[data-page=all-scores] select").val();$("[data-page=all-scores] .tableCont:visible").fadeOut(200,function(){$("[data-page=all-scores] .tableCont[data-table="+e+"]").fadeIn(200)})}function allGamesDropDownChange(){var e=$("[data-page=all-games] select").val();$("[data-page=all-games] .tableCont:visible").fadeOut(200,function(){$("[data-page=all-games] .tableCont[data-table="+e+"]").fadeIn(200)})}function allShotsDropDownChange(){var e=$("[data-page=all-shots] select").val();$("[data-page=all-shots] .tableCont:visible").fadeOut(200,function(){$("[data-page=all-shots] .tableCont[data-table="+e+"]").fadeIn(200)})}function getTopTenUserStatsByUserIdAndDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUserStatsByUserIdAndDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUserStatsByUserIdAndDifficultyTable(t),populateTopTenUserStatsByUserIdAndDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersScoresByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersScoresByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersScoresByDifficultyTable(t),populateTopTenUsersScoresByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersHighScoresByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersHighScoresByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersHighScoresByDifficultyTable(t),populateTopTenUsersHighScoresByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersWinsByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersWinsByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersWinsByDifficultyTable(t),populateTopTenUsersWinsByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersGamesPlayedByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersGamesPlayedByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersGamesPlayedByDifficultyTable(t),populateTopTenUsersGamesPlayedByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersTotalShotsFiredByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersTotalShotsFiredByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersTotalShotsFiredByDifficultyTable(t),populateTopTenUsersTotalShotsFiredByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersTotalShotsHitByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersTotalShotsHitByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersTotalShotsHitByDifficultyTable(t),populateTopTenUsersTotalShotsHitByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersTotalHitsReceivedByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersTotalHitsReceivedByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersTotalHitsReceivedByDifficultyTable(t),populateTopTenUsersTotalHitsReceivedByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersTotalPlayingTimeByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersTotalPlayingTimeByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);populateTopTenUsersTotalPlayingTimeByDifficultyTable(t),populateTopTenUsersTotalPlayingTimeByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function getTopTenUsersHitAccuracyByDifficulty(){$.ajax({url:"../../Content/Ajax/statisticsAjax.php",data:{action:"getTopTenUsersHitAccuracyByDifficulty"},type:"post",success:function(e){var t=JSON.parse(e);getTopTenUsersHitAccuracyByDifficultyTable(t),getTopTenUsersHitAccuracyByDifficultyTableMobile(t)},error:function(){alert("Something went wrong")},complete:function(){}})}function populateTopTenUserStatsByUserIdAndDifficultyTable(e){var t="",i=["score","highScore","wins","losses","gamesPlayed","incompleteGames","gamesStarted","completionRate","totalShotsFired","totalShotsHit","accuracy","totalHitsReceived","totalPlayingTime"],a=["Accumulative Score","High Score","Wins","Losses","Games Played","Incomplete Games","Games Started","Completion Rate","Total Shots Fired","Total Shots Hit","Accuracy","Total Hits Received","Total Playing Time"];t+=difficultyTableRow(!0),t+="<tbody>";for(var o=0;o<i.length;o++){t+="<tr>",t+="<td>",t+=a[o],t+="</td>";for(var l=0;l<difficulties.length;l++){var n=e[difficulties[l]];t+="<td>";var s=i[o];if("losses"==s)t+=n.gamesPlayed-n.wins;else if("gamesStarted"==s)t+=parseInt(n.gamesPlayed)+parseInt(n.incompleteGames);else if("completionRate"==s){var c=n.gamesPlayed/(parseInt(n.gamesPlayed)+parseInt(n.incompleteGames))*100;t+=convertPercentage(c)}else if("accuracy"==s){var c=n.totalShotsHit/n.totalShotsFired*100;t+=convertPercentage(c)}else t+="totalPlayingTime"==s?convertPlayingTime(n[s]):n[s];t+="</td>"}t+="</tr>"}t+="</tbody>",$("#playerStatistics").html(t)}function populateTopTenUserStatsByUserIdAndDifficultyTableMobile(e){for(var t="",i=["score","highScore","wins","losses","gamesPlayed","incompleteGames","gamesStarted","completionRate","totalShotsFired","totalShotsHit","accuracy","totalHitsReceived","totalPlayingTime"],a=["Accumulative Score","High Score","Wins","Losses","Games Played","Incomplete Games","Games Started","Completion Rate","Total Shots Fired","Total Shots Hit","Accuracy","Total Hits Received","Total Playing Time"],o=0;o<difficulties.length;o++){t+="<table",t+=" class='"+difficulties[o]+"'",t+=">",t+="<thead>",t+="<th></th>",t+="<th>",t+=capitaliseFirstChar(difficulties[o]),t+="</th>",t+="</thead>",t+="<tbody>";for(var l=0;l<i.length;l++){t+="<tr>",t+="<td>",t+=a[l],t+="</td>";var n=e[difficulties[o]];t+="<td>";var s=i[l];if("losses"==s)t+=n.gamesPlayed-n.wins;else if("gamesStarted"==s)t+=parseInt(n.gamesPlayed)+parseInt(n.incompleteGames);else if("completionRate"==s){var c=n.gamesPlayed/(parseInt(n.gamesPlayed)+parseInt(n.incompleteGames))*100;t+=convertPercentage(c)}else if("accuracy"==s){var c=n.totalShotsHit/n.totalShotsFired*100;t+=convertPercentage(c)}else t+="totalPlayingTime"==s?convertPlayingTime(n[s]):n[s];t+="</td>",t+="</tr>"}t+="</tbody>"}$("#playerStatisticsMobile .tables").html(t),$("#playerStatisticsMobile .difficultyOptions").trigger("change")}function populateTopTenUsersScoresByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","score"),$("#topTenScores").html(t)}function populateTopTenUsersScoresByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","score");$("#topTenScoresMobile .tables").html(t),$("#topTenScoresMobile .difficultyOptions").trigger("change")}function populateTopTenUsersHighScoresByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","highScore"),$("#topTenHighScores").html(t)}function populateTopTenUsersHighScoresByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","highScore");$("#topTenHighScoresMobile .tables").html(t),$("#topTenHighScoresMobile .difficultyOptions").trigger("change")}function populateTopTenUsersWinsByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","wins"),$("#topTenWins").html(t)}function populateTopTenUsersWinsByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","wins");$("#topTenWinsMobile .tables").html(t),$("#topTenWinsMobile .difficultyOptions").trigger("change")}function populateTopTenUsersGamesPlayedByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","gamesPlayed"),$("#topTenGamesPlayed").html(t)}function populateTopTenUsersGamesPlayedByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","gamesPlayed");$("#topTenGamesPlayedMobile .tables").html(t),$("#topTenGamesPlayedMobile .difficultyOptions").trigger("change")}function populateTopTenUsersTotalShotsFiredByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","totalShotsFired"),$("#topTenTotalShotsFired").html(t)}function populateTopTenUsersTotalShotsFiredByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","totalShotsFired");$("#topTenTotalShotsFiredMobile .tables").html(t),$("#topTenTotalShotsFiredMobile .difficultyOptions").trigger("change")}function populateTopTenUsersTotalShotsHitByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","totalShotsHit"),$("#topTenTotalShotsHit ").html(t)}function populateTopTenUsersTotalShotsHitByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","totalShotsHit");$("#topTenTotalShotsHitMobile .tables").html(t),$("#topTenTotalShotsHitMobile .difficultyOptions").trigger("change")}function populateTopTenUsersTotalHitsReceivedByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","totalHitsReceived"),$("#topTenTotalHitsReceived").html(t)}function populateTopTenUsersTotalHitsReceivedByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","totalHitsReceived");$("#topTenTotalHitsReceivedMobile .tables").html(t),$("#topTenTotalHitsReceivedMobile .difficultyOptions").trigger("change")}function populateTopTenUsersTotalPlayingTimeByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","totalPlayingTime","playingTime"),$("#topTenTotalPlayingTime").html(t)}function populateTopTenUsersTotalPlayingTimeByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","totalPlayingTime","playingTime");$("#topTenTotalPlayingTimeMobile .tables").html(t),$("#topTenTotalPlayingTimeMobile .difficultyOptions").trigger("change")}function getTopTenUsersHitAccuracyByDifficultyTable(e){var t="";t+=difficultyTableRow(!1),t+=tbodyTopTenTwoItemCell(e,"userID","accuracy","percentage"),$("#topTenTotalAccuracy").html(t)}function getTopTenUsersHitAccuracyByDifficultyTableMobile(e){var t=mobileIndividualTablesByDifficultyTopTen(e,"userID","accuracy","percentage");$("#topTenTotalAccuracyMobile .tables").html(t),$("#topTenTotalAccuracyMobile .difficultyOptions").trigger("change")}function tbodyTopTenTwoItemCell(e,t,i,a){for(var o="",l=0;l<10;l++){o+="<tr>";for(var n=0;n<difficulties.length;n++){var s=e[difficulties[n]][l];o+="playingTime"==a&&s?twoItemTableCell(s[t],convertPlayingTime(s[i])):"percentage"==a&&s?twoItemTableCell(s[t],convertPercentage(s[i])):s?twoItemTableCell(s[t],s[i]):"<td>N/A</td>"}o+="</tr>"}return o}function mobileIndividualTablesByDifficultyTopTen(e,t,i,a){for(var o="",l=0;l<difficulties.length;l++){o+="<table",o+=" class='"+difficulties[l]+"'",o+=">",o+="<thead>",o+="<th>",o+=capitaliseFirstChar(difficulties[l]),o+="</th>",o+="</thead>";for(var n=0;n<10;n++){o+="<tr>";var s=e[difficulties[l]][n];o+="playingTime"==a&&s?twoItemTableCell(s[t],convertPlayingTime(s[i])):"percentage"==a&&s?twoItemTableCell(s[t],convertPercentage(s[i])):s?twoItemTableCell(s[t],s[i]):"<td>N/A</td>",o+="</tr>"}o+="</table>"}return o}function twoItemTableCell(e,t){var i="<td><div>";return i+="<label>",i+=e,i+="</label>",i+="<span>",i+=t,i+="</span>",i+="</div></td>"}function convertPlayingTime(e){var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,8)}function convertPercentage(e){return e?parseFloat(e).toFixed(2)+"%":"N/A"}function capitaliseFirstChar(e){for(var t=e.split(" "),i=0;i<t.length;i++){var a=t[i].split("");a[0]=a[0].toUpperCase(),t[i]=a.join("")}return t.join(" ")}function difficultyTableRow(e){var t="";t+="<thead>",t+="<tr>",e&&(t+="<th></th>");for(var i=0;i<difficulties.length;i++)t+="<th>",t+=capitaliseFirstChar(difficulties[i]),t+="</th>";return t+="</tr>",t+="</thead>"}var menu="#folderMenu",difficulties=["easy","medium","hard","multiplayer"];$(document).ready(function(){getTopTenUserStatsByUserIdAndDifficulty(),getTopTenUsersScoresByDifficulty(),getTopTenUsersHighScoresByDifficulty(),getTopTenUsersWinsByDifficulty(),getTopTenUsersGamesPlayedByDifficulty(),getTopTenUsersTotalShotsFiredByDifficulty(),getTopTenUsersTotalShotsHitByDifficulty(),getTopTenUsersTotalHitsReceivedByDifficulty(),getTopTenUsersTotalPlayingTimeByDifficulty(),getTopTenUsersHitAccuracyByDifficulty(),populateDifficultyDropdowns(),$(menu+" button[data-selected=false]").on("click",function(){var e=$(this),t=e.data("page");changePage(t)})});